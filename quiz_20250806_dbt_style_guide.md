# dbtスタイルガイド クイズ - 20250806

## クイズ概要
このクイズは、dbtプロジェクトにおけるモデルスタイリングのベストプラクティスに関する理解度を測定します。
参考資料: https://docs.getdbt.com/best-practices/how-we-style/1-how-we-style-our-dbt-models

---

## 問題1: モデル命名規則（基礎）
dbtモデル名について正しいものを選択してください。

A. `models.with.dots` （ドットを使用）
B. `models_without_dots` （アンダースコアを使用）
C. `ModelsWithCamelCase` （キャメルケース）
D. `models-with-hyphens` （ハイフン使用）

**正解: B**
**解説:** dbtモデル名はアンダースコアを使用します。多くのデータプラットフォームでは`database.schema.object`の形式でドットを使用するため、クォートが不要になり、問題のリスクが軽減されます。

---

## 問題2: プライマリキーの命名
dbtモデルのプライマリキーの命名規則として適切なものはどれですか？

A. `id`
B. `primary_key`
C. `<object>_id` （例: `customer_id`）
D. `pk_<object>` （例: `pk_customer`）

**正解: C**
**解説:** プライマリキーは`<object>_id`の形式で命名します（例: `account_id`）。これにより、下流の結合モデルでどのIDが参照されているかを理解しやすくなります。

---

## 問題3: データ型の推奨事項
dbtモデルにおけるキーのデータ型として推奨されるものは？

A. INTEGER
B. STRING
C. FLOAT
D. BOOLEAN

**正解: B**
**解説:** キーは文字列データ型であるべきです。これにより一貫性が保たれ、様々なデータプラットフォーム間での互換性が向上します。

---

## 問題4: ブール値の命名規則
ブール値のカラム名として適切なプレフィックスはどれですか？

A. `flag_` または `bool_`
B. `is_` または `has_`
C. `check_` または `valid_`
D. `true_` または `false_`

**正解: B**
**解説:** ブール値は`is_`または`has_`でプレフィックスを付けます（例: `is_active`, `has_subscription`）。

---

## 問題5: タイムスタンプの命名
タイムスタンプカラムの命名規則として正しいものは？

A. `<event>_time` （例: `created_time`）
B. `<event>_timestamp` （例: `created_timestamp`）
C. `<event>_at` （例: `created_at`）
D. `<event>_datetime` （例: `created_datetime`）

**正解: C**
**解説:** タイムスタンプカラムは`<event>_at`の形式で命名し（例: `created_at`）、UTCであるべきです。異なるタイムゾーンの場合はサフィックスで示します（例: `created_at_pt`）。

---

## 問題6: 日付カラムの命名
日付カラムの命名規則として正しいものは？

A. `<event>_date` （例: `created_date`）
B. `<event>_day` （例: `created_day`）
C. `date_<event>` （例: `date_created`）
D. `<event>_dt` （例: `created_dt`）

**正解: A**
**解説:** 日付カラムは`<event>_date`の形式で命名します（例: `created_date`）。

---

## 問題7: 価格・収益フィールド
価格/収益フィールドの推奨形式は？

A. 整数（セント単位）
B. 小数点付き通貨（例: $19.99 → 19.99）
C. 文字列形式
D. どの形式でも問題ない

**正解: B**
**解説:** 価格/収益フィールドは小数点付き通貨であるべきです（$19.99の場合19.99）。多くのアプリデータベースではセント単位の整数で保存されますが、非小数点通貨の場合はサフィックスで示します（例: `price_in_cents`）。

---

## 問題8: 予約語の使用
カラム名として避けるべきものは？

A. 長い名前
B. 予約語（例: `order`, `select`）
C. 数字を含む名前
D. アンダースコアを含む名前

**正解: B**
**解説:** データベースの予約語をカラム名として使用することは避けるべきです。これによりクエリエラーや予期しない動作を防げます。

---

## 問題9: 一貫性のあるフィールド名
フィールド名の一貫性について正しい説明は？

A. 各モデルで独自の命名規則を使用する
B. モデル間で可能な限り同じフィールド名を使用する
C. 短縮形を積極的に使用する
D. 各開発者が好みの命名規則を使用する

**正解: B**
**解説:** 一貫性が重要です！可能な限りモデル間で同じフィールド名を使用します。例えば、`customers`テーブルへのキーは`user_id`や`id`ではなく`customer_id`と命名します。

---

## 問題10: モデルの複数形
モデル名の形式として推奨されるものは？

A. 単数形（例: `customer`, `order`）
B. 複数形（例: `customers`, `orders`）
C. どちらでも問題ない
D. テーブルの内容による

**正解: B**
**解説:** モデルは複数形であるべきです（例: `customers`, `orders`, `products`）。これにより、テーブルが複数のレコードを含むことが明確になります。

---

## 問題11: 省略形・別名の使用
フィールド名における省略形の使用について正しいものは？

A. 省略形を積極的に使用して簡潔にする
B. 省略形や別名は使用せず、読みやすさを重視する
C. よく知られた省略形のみ使用する
D. 文字数制限がある場合のみ使用する

**正解: B**
**解説:** 省略形や別名は使用しません。簡潔さよりも読みやすさを重視します。例えば、`customer`に対して`cust`、`orders`に対して`o`は使用しません。

---

## 問題12: カラムの順序
例として示されたモデルでのカラムの推奨順序は？

A. アルファベット順
B. 重要度順
C. ids → strings → numerics → booleans → dates → timestamps
D. 作成日順

**正解: C**
**解説:** 一貫したデータ型の順序を使用することを検討し、タイプ別にカラムをグループ化・ラベル付けします。推奨順序は：ids、strings、numerics、booleans、dates、timestampsです。

---

## 問題13: ビジネス用語 vs ソース用語
フィールド命名における優先事項は？

A. ソースデータベースの用語を使用
B. ビジネス用語を使用
C. 技術的な用語を使用
D. 最も短い用語を使用

**正解: B**
**解説:** ソース用語ではなく、ビジネス用語に基づいた名前を使用します。例えば、ソースデータベースで`user_id`を使用していても、ビジネスで`customer_id`と呼んでいる場合は、モデルでは`customer_id`を使用します。

---

## 問題14: モデルバージョニング
モデルのバージョンを示すための一貫したサフィックスは？

A. `_version1`, `_version2`
B. `_ver1`, `_ver2`
C. `_v1`, `_v2`
D. `_1`, `_2`

**正解: C**
**解説:** モデルのバージョンには一貫性のために`_v1`、`_v2`などのサフィックスを使用します（例: `customers_v1`、`customers_v2`）。

---

## 問題15: スネークケースの適用範囲
スネークケース（snake_case）を使用すべき対象は？

A. カラム名のみ
B. テーブル名のみ
C. スキーマ、テーブル、カラム名すべて
D. ファイル名のみ

**正解: C**
**解説:** スキーマ、テーブル、カラム名はすべてスネークケース（snake_case）であるべきです。

---

## 採点結果

### 得点計算
- 15問中 _____ 問正解
- 正答率: _____%

### 評価基準
- 13-15問正解 (87-100%): 優秀 - dbtスタイルガイドを十分理解しています
- 10-12問正解 (67-86%): 良好 - 基本的な理解はありますが、細部の確認が必要です
- 7-9問正解 (47-66%): 要復習 - スタイルガイドの再学習をお勧めします
- 6問以下 (46%以下): 要基礎学習 - 基本から学習し直すことをお勧めします

---

## 参考資料
- [dbt Labs - How we style our dbt models](https://docs.getdbt.com/best-practices/how-we-style/1-how-we-style-our-dbt-models)
- [dbt Labs - How we style our dbt projects](https://docs.getdbt.com/best-practices/how-we-style/0-how-we-style-our-dbt-projects)

作成日: 2025年8月6日